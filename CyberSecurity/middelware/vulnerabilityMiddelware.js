const express = require("express")
function inputValidation(req, res, next) {
    if (!req.body.ip || !req.body.port)
        return res.status(400).json({ message: "missing ip or port " })
    else return next()
}
const isValidUUIDv4 = (req, res, next) => {
    const id = req.body.id
    if (!id)
        return res.status(400).json({ message: "missing id " })

    const uuidv4Regex = /^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-4[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$/;
    if (!uuidv4Regex.test(id)) {
        return res.status(400).json({ message: 'Invalid id provided' });
    }
    return next();
};
//this function for only test 
function test(req, res, next) {
    req.body.ip = "163.70.158.35"
    req.body.port = "80"
    req.body.id="1f83a543-4b2e-40e8-a5ce-4e87ebea2a27"
    return next()
}

module.exports = { inputValidation, test, isValidUUIDv4 }
